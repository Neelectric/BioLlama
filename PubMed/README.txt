# PubMed Embeddings by MedCPT

This folder contains the PubMed article embeddings generated by the MedCPT article encoder (https://huggingface.co/ncbi/MedCPT-Article-Encoder). 

# Usage

You can use the embeddings for at least two purposes:
1. Finding similar articles using their embeddings.
2. Encoding a query with the MedCPT query encoder (https://huggingface.co/ncbi/MedCPT-Query-Encoder) and use it to search the relevant articles. 

# Organization

The embeddings files are organized into chunks, where each chunk contains about 1 million articles. For example, the chunk 0 contains PMIDs from 0 - 999,999. Each chunk will not be exactly 1 million because some articles are missing.

Each chunk contains three files: 
1. `embeds_chunk_{chunk_id}.npy` is a numpy array of shape (N, 768), where N is about 1M and 768 is the embedding dimension.
2. `pmids_chunk_{chunk_id}.json` is a list of N PMIDs that correspond to the vectors.
3. `pubmed_chunk_{chunk_id}.json` is a dict that maps these N PMIDs to their actual contents.

# Usage
```python
Python 3.9.13 (main, Aug 25 2022, 23:26:10) 
[GCC 11.2.0] :: Anaconda, Inc. on linux
Type "help", "copyright", "credits" or "license" for more information.
>>> import json
>>> import numpy as np
>>> embeds = np.load("embeds_chunk_18.npy")
>>> embeds.shape
(940707, 768)
>>> pmids = json.load(open("pmids_chunk_18.json"))
>>> len(pmids)
940707
>>> pmid2content = json.load(open("pubmed_chunk_18.json"))
>>> len(pmid2content)
940707
>>> pmids[:10]
['18000000', '18000001', '18000002', '18000003', '18000004', '18000005', '18000006', '18000007', '18000008', '18000009']
>>> pmid2content["18000000"]
{'d': '20071115', 't': 'NONCODE v2.0: decoding the non-coding.', 'a': 'The NONCODE database is an integrated knowledge database designed for the analysis of non-coding RNAs (ncRNAs). Since NONCODE was first released 3 years ago, the number of known ncRNAs has grown rapidly, and there is growing recognition that ncRNAs play important regulatory roles in most organisms. In the updated version of NONCODE (NONCODE v2.0), the number of collected ncRNAs has reached 206 226, including a wide range of microRNAs, Piwi-interacting RNAs and mRNA-like ncRNAs. The improvements brought to the database include not only new and updated ncRNA data sets, but also an incorporation of BLAST alignment search service and access through our custom UCSC Genome Browser. NONCODE can be found under http://www.noncode.org or http://noncode.bioinfo.org.cn.', 'm': 'animals!|databases, nucleic acid!|databases, nucleic acid*|humans!|internet!|rna, untranslated!|rna, untranslated!chemistry|rna, untranslated!chemistry*|rna, untranslated!classification|rna, untranslated!genetics|user-computer interface!|'}
```

# Acknowledgments

This work was supported by the Intramural Research Programs of the National Institutes of Health, National Library of Medicine.

# Disclaimer

This tool shows the results of research conducted in the Computational Biology Branch, NCBI/NLM. The information produced on this website is not intended for direct diagnostic use or medical decision-making without review and oversight by a clinical professional. Individuals should not change their health behavior solely on the basis of information produced on this website. NIH does not independently verify the validity or utility of the information produced by this tool. If you have questions about the information produced on this website, please see a health care professional. More information about NCBI's disclaimer policy is available.

# Citation

If you find this repo helpful, please cite MedCPT by:

```bibtext
@misc{jin2023MedCPT,
      title={MedCPT: Contrastive Pre-trained Transformers with Large-scale PubMed Search Logs for Zero-shot Biomedical Information Retrieval}, 
      author={Qiao Jin and Won Kim and Qingyu Chen and Donald C. Comeau and Lana Yeganova and John Wilbur and Zhiyong Lu},
      year={2023},
      eprint={2307.00589},
      archivePrefix={arXiv},
      primaryClass={cs.IR}
}
```
